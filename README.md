# 🍌 NanoBanana 批量出图工具 V4.0

一款功能强大的AI图片批量生成工具，基于PyQt6开发，支持多种AI平台API，专为高效批量图片生成而设计。

## ✨ 核心特性

- 🚀 **多平台支持**: 兼容云雾AI、ApiCore、API易等主流AI平台
- 🎨 **智能风格管理**: 内置样式库，快速切换图片生成风格
- 📸 **参考图支持**: 上传参考图片，生成更精准的图片
- ⚡ **高效批量处理**: 多线程并发生成，大幅提升工作效率
- 🔐 **安全密钥管理**: 加密存储API密钥，支持多账户管理
- 📊 **CSV导入导出**: 支持批量导入提示词，导出生成结果
- 🖥️ **跨平台支持**: 完美运行在Windows和macOS系统

## 💻 系统要求

### 支持的操作系统
- ✅ **Windows** 10/11 或更高版本
- ✅ **macOS** 10.14 或更高版本
- ✅ **Linux** (Ubuntu/Debian/CentOS)

### 软件依赖
- **Python** 3.7 或更高版本
- **内存**: 建议 4GB 或以上
- **存储空间**: 至少 500MB 可用空间
- **网络**: 稳定的互联网连接

## 🚀 新手安装指南

## 📱 Windows系统安装教程

### 第一步：安装Python环境
1. **下载Python**
   - 访问 [Python官网](https://www.python.org/downloads/) 
   - 点击"Download Python 3.x.x"下载最新版本

2. **安装Python**
   - 双击下载的安装包
   - **⚠️ 重要**: 勾选"Add Python to PATH"选项
   - 点击"Install Now"
   - 安装完成后点击"Close"

3. **验证安装**
   - 按 `Win + R` 键，输入 `cmd`，按回车
   - 输入 `python --version`
   - 如果显示版本号，说明安装成功

### 第二步：下载项目
1. 访问 [GitHub项目页面](https://github.com/dachen101/NanoBanana-)
2. 点击绿色的"Code"按钮
3. 选择"Download ZIP"
4. 下载完成后，解压到桌面

### 第三步：安装依赖
1. **进入项目文件夹**
   - 打开解压后的文件夹
   - 在地址栏输入 `cmd` 并按回车

2. **安装依赖包**
   ```cmd
   pip install -r requirements.txt
   ```

### 第四步：启动程序
双击 `Nano banana批量出图启动.bat` 文件即可启动

### 遇到问题怎么办？
- **提示"python不是内部命令"** → 重新安装Python，确保勾选"Add Python to PATH"
- **依赖安装失败** → 使用命令：`python -m pip install -r requirements.txt`

---

## 🍎 macOS系统安装教程

### 第一步：安装Python环境
1. **下载Python**
   - 访问 [Python官网macOS页面](https://www.python.org/downloads/macos/)
   - 下载对应你Mac芯片的版本（Intel或Apple Silicon）

2. **安装Python**
   - 双击下载的.pkg文件
   - 按提示完成安装

3. **验证安装**
   - 打开"终端"应用
   - 输入 `python3 --version`
   - 如果显示版本号，说明安装成功

### 第二步：下载项目
1. 访问 [GitHub项目页面](https://github.com/dachen101/NanoBanana-)
2. 点击"Code" → "Download ZIP"
3. 下载后解压到桌面

### 第三步：安装依赖
1. **进入项目目录**
   ```bash
   cd ~/Desktop/NanoBanana-
   ```

2. **安装依赖包**
   ```bash
   pip3 install -r requirements.txt
   ```

### 第四步：启动程序
```bash
python3 main.py
```

### 遇到问题怎么办？
- **提示安全限制** → 系统偏好设置 > 安全性与隐私 > 通用 > 允许运行
- **权限问题** → 使用命令：`pip3 install --user -r requirements.txt`

## 📖 详细使用教程

### 第一步：初始配置

#### 1.1 启动程序
首次运行时会自动创建配置文件 `config.json`

**[需要截图：程序启动后的主界面，显示设置中心按钮]**

#### 1.2 配置API密钥
1. 点击右上角的 **"⚙️ 设置中心"** 按钮
2. 在弹出的设置窗口中，选择 **"密钥库管理"** 标签页

**[需要截图：设置中心界面，显示各个标签页]**

3. 点击 **"➕ 添加密钥"** 按钮
4. 填写密钥信息：
   - **密钥名称**: 为密钥取一个便于识别的名字（如"我的云雾API"）
   - **API平台**: 选择对应的AI平台（云雾/ApiCore/API易）
   - **API密钥**: 输入从AI平台获取的密钥

**[需要截图：添加密钥对话框，显示各个输入字段]**

#### 1.3 基础参数设置
切换到 **"⚙️ 基础配置"** 标签页：

1. **密钥选择**: 从下拉菜单选择要使用的API密钥
2. **线程数量**: 建议设置1-50个（根据API平台限制调整）
3. **重试次数**: 建议设置2-3次
4. **保存路径**: 点击"📁 浏览"选择图片保存目录

**[需要截图：基础配置页面，显示各个配置选项]**

### 第二步：提示词管理

#### 2.1 添加提示词
回到主界面的 **"📝 提示词管理与生成"** 区域：

1. **单个添加**: 点击 **"➕ 添加提示词"** 按钮
2. **批量导入**: 点击 **"📁 导入CSV文件"** 按钮

**[需要截图：主界面的提示词管理区域，显示添加按钮和表格]**

#### 2.2 CSV文件格式
支持的CSV文件格式：
```csv
prompt
一个可爱的猫咪，坐在窗台上
一朵美丽的玫瑰花，微距摄影
城市夜景，霓虹灯闪烁
```

**[需要截图：CSV导入后的提示词列表]**

#### 2.3 编辑和管理
- **编辑**: 双击表格中的提示词进行编辑
- **删除**: 选中行后点击 **"🗑️ 删除选中"**
- **清空**: 点击 **"🗑️ 清空全部"** 清除所有提示词
- **导出**: 点击 **"📤 导出CSV"** 导出当前提示词列表

### 第三步：风格和参考图设置

#### 3.1 风格库管理
在设置中心的 **"风格库管理"** 标签页：

1. 点击 **"新建风格"** 创建自定义风格
2. 输入风格名称和内容（如"写实风格"、"动漫风格"等）
3. 在主界面右侧的风格下拉菜单中选择使用

**[需要截图：风格库管理界面]**

#### 3.2 参考图管理
在设置中心的 **"参考图管理"** 标签页：

1. 点击 **"添加图片"** 上传参考图
2. 可以添加多张参考图，系统会自动组合使用
3. 支持JPG、PNG等常见图片格式

**[需要截图：参考图管理界面，显示已上传的图片]**

### 第四步：开始批量生成

#### 4.1 预生成检查
确认以下设置：
- ✅ API密钥已配置并有效
- ✅ 保存路径已设置
- ✅ 提示词列表不为空
- ✅ 网络连接正常

#### 4.2 启动生成
1. 在主界面下方找到 **"🎯 生成控制"** 区域
2. 点击 **"🚀 开始生成"** 按钮
3. 程序会显示实时进度和状态信息

**[需要截图：生成控制区域，显示开始按钮和进度显示]**

#### 4.3 监控进度
- **实时状态**: 显示当前正在处理的提示词
- **进度条**: 显示整体完成进度
- **成功/失败统计**: 实时更新生成结果统计
- **暂停/停止**: 可随时暂停或停止生成过程

**[需要截图：生成过程中的界面，显示进度和状态信息]**

## 🔧 高级功能

### 多账户管理
- 支持保存多个API密钥，方便切换不同账户
- 每个密钥记录使用时间和频率
- 自动检测密钥有效性

### 自定义风格
- 创建个人专属的图片风格模板
- 支持风格的导入导出和分享
- 组合多个风格效果

### 批处理优化
- 智能任务队列管理
- 失败自动重试机制
- 网络异常恢复功能

## 🔍 故障排除

### 常见问题

#### Q: 程序启动失败
**A**: 检查Python版本和依赖安装
```bash
python --version  # 确认Python版本
pip list  # 检查已安装的包
pip install -r requirements.txt  # 重新安装依赖
```

#### Q: API调用失败
**A**: 检查以下项目：
- API密钥是否正确且有效
- 账户余额是否充足
- 网络连接是否正常
- API平台是否正常服务

#### Q: 图片生成速度慢
**A**: 优化建议：
- 适当调整线程数量（建议5-20个）
- 检查网络连接速度
- 选择响应速度较快的API平台

#### Q: 程序界面显示异常
**A**: 尝试以下解决方案：
- 重启程序
- 检查系统显示缩放设置
- 更新PyQt6到最新版本

### 日志文件
程序运行时会生成日志文件 `nanobana_generator.log`，包含详细的错误信息和运行状态，便于问题诊断。

## 📋 更新日志

### V4.0 (当前版本)
- ✨ 全新的PyQt6界面设计
- 🔐 增强的密钥管理系统
- 📸 支持参考图功能
- ⚡ 优化的多线程处理
- 🛡️ 改进的错误处理机制

### V3.x
- 基础的批量生成功能
- 简单的配置管理
- CSV导入导出

## 🤝 技术支持

### 获取帮助
- **GitHub Issues**: [提交问题](https://github.com/dachen101/NanoBanana-/issues)
- **功能建议**: 欢迎提交功能请求和改进建议

### 贡献代码
欢迎提交Pull Request来改进这个项目！

## ⚠️ 重要声明

1. **API密钥安全**: 请妥善保管您的API密钥，不要分享给他人
2. **使用条款**: 请遵守各AI平台的使用条款和限制
3. **内容责任**: 用户对生成的图片内容承担全部责任
4. **备份数据**: 建议定期备份重要的配置和风格库数据

## 📄 许可证

本项目采用 MIT 许可证 - 详情请查看 [LICENSE](LICENSE) 文件。

---

**🌟 如果这个工具对您有帮助，请给我们一个Star！**

[![GitHub stars](https://img.shields.io/github/stars/dachen101/NanoBanana-.svg?style=social&label=Star)](https://github.com/dachen101/NanoBanana-)
[![GitHub forks](https://img.shields.io/github/forks/dachen101/NanoBanana-.svg?style=social&label=Fork)](https://github.com/dachen101/NanoBanana-/fork)